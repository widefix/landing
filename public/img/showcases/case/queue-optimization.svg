<svg width="800" height="600" viewBox="0 0 800 600" fill="none" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="600" fill="#F8FAFC"/>

  <!-- Title -->
  <text x="400" y="50" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#1E293B" text-anchor="middle">Queue Optimization Architecture</text>

  <!-- Before State -->
  <g transform="translate(50, 100)">
    <text x="150" y="0" font-family="Arial, sans-serif" font-size="20" font-weight="600" fill="#DC2626" text-anchor="middle">Before: Stalled Queue</text>

    <!-- Stalled queue representation -->
    <rect x="20" y="20" width="260" height="80" rx="8" fill="#FEE2E2" stroke="#DC2626" stroke-width="2"/>
    <text x="150" y="50" font-family="Arial, sans-serif" font-size="14" fill="#991B1B" text-anchor="middle">Background Jobs Queue</text>
    <text x="150" y="75" font-family="Arial, sans-serif" font-size="12" fill="#991B1B" text-anchor="middle">⚠ STALLED - Jobs Not Processing</text>

    <!-- Jobs stuck -->
    <circle cx="60" cy="130" r="15" fill="#EF4444"/>
    <text x="60" y="135" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Job</text>

    <circle cx="110" cy="130" r="15" fill="#EF4444"/>
    <text x="110" y="135" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Job</text>

    <circle cx="160" cy="130" r="15" fill="#EF4444"/>
    <text x="160" y="135" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Job</text>

    <circle cx="210" cy="130" r="15" fill="#EF4444"/>
    <text x="210" y="135" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Job</text>

    <!-- H12 Errors -->
    <rect x="20" y="160" width="260" height="60" rx="8" fill="#FEE2E2" stroke="#DC2626" stroke-width="2"/>
    <text x="150" y="185" font-family="Arial, sans-serif" font-size="14" font-weight="600" fill="#991B1B" text-anchor="middle">Heroku H12 Errors</text>
    <text x="150" y="205" font-family="Arial, sans-serif" font-size="12" fill="#991B1B" text-anchor="middle">Multiple times per day</text>
  </g>

  <!-- Arrow -->
  <g transform="translate(380, 280)">
    <line x1="0" y1="0" x2="40" y2="0" stroke="#10B981" stroke-width="4" marker-end="url(#arrowhead)"/>
    <text x="20" y="-10" font-family="Arial, sans-serif" font-size="16" font-weight="600" fill="#10B981" text-anchor="middle">Optimized</text>
  </g>

  <!-- After State -->
  <g transform="translate(450, 100)">
    <text x="150" y="0" font-family="Arial, sans-serif" font-size="20" font-weight="600" fill="#10B981" text-anchor="middle">After: Optimized Queue</text>

    <!-- Optimized queue -->
    <rect x="20" y="20" width="260" height="80" rx="8" fill="#D1FAE5" stroke="#10B981" stroke-width="2"/>
    <text x="150" y="50" font-family="Arial, sans-serif" font-size="14" fill="#065F46" text-anchor="middle">Optimized DelayedJob Queue</text>
    <text x="150" y="75" font-family="Arial, sans-serif" font-size="12" fill="#065F46" text-anchor="middle">✓ Processing Jobs Efficiently</text>

    <!-- Jobs processing -->
    <circle cx="60" cy="130" r="15" fill="#10B981"/>
    <text x="60" y="135" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">✓</text>

    <circle cx="110" cy="130" r="15" fill="#10B981"/>
    <text x="110" y="135" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">✓</text>

    <circle cx="160" cy="130" r="15" fill="#10B981"/>
    <text x="160" y="135" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">✓</text>

    <circle cx="210" cy="130" r="15" fill="#34D399"/>
    <text x="210" y="135" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">→</text>

    <!-- Monitoring -->
    <rect x="20" y="160" width="260" height="60" rx="8" fill="#D1FAE5" stroke="#10B981" stroke-width="2"/>
    <text x="150" y="185" font-family="Arial, sans-serif" font-size="14" font-weight="600" fill="#065F46" text-anchor="middle">Monitoring & Error Handling</text>
    <text x="150" y="205" font-family="Arial, sans-serif" font-size="12" fill="#065F46" text-anchor="middle">Zero H12 errors</text>
  </g>

  <!-- Integrations Section -->
  <g transform="translate(50, 400)">
    <text x="350" y="0" font-family="Arial, sans-serif" font-size="22" font-weight="600" fill="#1E293B" text-anchor="middle">Third-Party Integrations</text>

    <!-- New Integrations -->
    <rect x="20" y="20" width="330" height="120" rx="8" fill="#DBEAFE" stroke="#2563EB" stroke-width="2"/>
    <text x="185" y="45" font-family="Arial, sans-serif" font-size="16" font-weight="600" fill="#1E40AF" text-anchor="middle">New Integrations Added</text>
    <text x="185" y="70" font-family="Arial, sans-serif" font-size="14" fill="#1E40AF" text-anchor="middle">Etsy • TikTok • Mailchimp</text>
    <text x="185" y="95" font-family="Arial, sans-serif" font-size="14" fill="#1E40AF" text-anchor="middle">Awin • Smiffys</text>

    <!-- Fixed Integrations -->
    <rect x="370" y="20" width="330" height="120" rx="8" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2"/>
    <text x="535" y="45" font-family="Arial, sans-serif" font-size="16" font-weight="600" fill="#92400E" text-anchor="middle">Integrations Fixed</text>
    <text x="535" y="70" font-family="Arial, sans-serif" font-size="14" fill="#92400E" text-anchor="middle">Xero • Kashflow • Clearbooks</text>
    <text x="535" y="95" font-family="Arial, sans-serif" font-size="14" fill="#92400E" text-anchor="middle">QuickBooks • Lightspeed (Vend)</text>
  </g>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#10B981" />
    </marker>
  </defs>
</svg>
